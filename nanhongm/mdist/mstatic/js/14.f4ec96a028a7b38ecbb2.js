webpackJsonp([14],{"0cZF":function(t,s){},"907N":function(t,s){},sXVJ:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("Dd8w"),a=i.n(e),n=i("8j9N"),c=i("4B0c"),r=i("mvHQ"),o=i.n(r),l={name:"tabBar",data:function(){return{ismenu:!1,isbule:!1,activeNames:[],curindex:0,curitemindex:[0],showlist:[],issel:!1,morefl:[],iscur:!1,arr:[],arrb:[],classid:"",keyword:"",copycurinfo:[]}},mounted:function(){},watch:{morecur:function(t){if(console.log(t),0!=t.length){console.log(t,"morecur存在");for(var s=0;s<t.length;s++)this.activeNames[s]=s,this.arr[s]=[],this.arrb[s]=[]}}},props:{morecur:{type:Array,default:{}},curinfo:{type:Array,default:{}},curlist:{type:Array,default:{}},curinfoindex:{type:Number,default:null}},methods:{curitem:function(t,s,i){if(0==t)this.curitemindex[t]=s,this.classid=i.class_id,this.$emit("change",t,i);else{-1==this.arr[t].indexOf(i)?this.arr[t].push(i):this.arr[t].splice(this.arr[t].indexOf(i),1);var e=this.encodeArray2D(this.arr);this.keyword=e}this.$forceUpdate()},encodeArray2D:function(t){for(var s=[],i=0;i<t.length;i++)s[i]=t[i].join("|");return s.join(",")},changenav:function(t,s){this.curindex=t,this.issel=!1,this.$emit("change",this.curindex,s)},getmore:function(){var t=this;this.curindex=3,this.issel=!0,setTimeout(function(){t.ismenu=!0},500)},reset:function(){this.isbule=!0,this.curitemindex=[0],this.arr=JSON.parse(o()(this.arrb)),this.$forceUpdate(),console.log(this.arr)},set:function(){var t=this;this.isbule=!1,""==this.classid&&(this.classid=this.curinfo[0].class_id),this.$emit("set",this.keyword,this.classid),setTimeout(function(){t.ismenu=!1},500)}}},u={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"curinfo"},[i("ul",{staticClass:"cilist"},[t._l(t.curlist,function(s,e){return i("li",{key:e,staticClass:"cili",class:t.curindex==e?"sel":"",on:{click:function(i){return t.changenav(e,s)}}},[i("span",[t._v(t._s(s.class_name))])])}),t._v(" "),i("li",{staticClass:"more",on:{click:t.getmore}},[i("span",[t._v("|")]),t._v(" "),i("p",{class:{sel:!0===t.issel}},[t._v("更多筛选>")])])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.ismenu,expression:"ismenu"}],staticClass:"moremenu clearFix"},[i("div",{staticClass:"menubox clearFix"},[i("van-collapse",{staticClass:"fr moremenulist",model:{value:t.activeNames,callback:function(s){t.activeNames=s},expression:"activeNames"}},t._l(this.morecur,function(s,e){return i("van-collapse-item",{key:e,attrs:{title:s.class_name,name:e}},t._l(s.child,function(s,a){return i("div",{key:a,staticClass:"mli",on:{click:function(i){return t.curitem(e,a,s)}}},[s.class_name?i("p",{class:{cur:t.curitemindex[e]===a}},[t._v(t._s(s.class_name))]):i("p",{class:{cur:-1!=t.arr[e].indexOf(s)}},[t._v(t._s(s))])])}),0)}),1)],1),t._v(" "),i("div",{staticClass:"btnbox fr"},[i("p",{staticClass:"cz",class:{blue:!0===t.isbule},on:{click:t.reset}},[t._v("重置")]),t._v(" "),i("p",{staticClass:"qr",class:{blue:!1===t.isbule},on:{click:t.set}},[t._v("确定")])])])])},staticRenderFns:[]};var d=i("VU/8")(l,u,!1,function(t){i("0cZF")},"data-v-3446a6d4",null).exports,h=i("hm3b"),f=(i("QEuQ"),i("NYxO")),m={name:"product",data:function(){return{pageSize:6,currentPage:1,count:300,curindex:0,curinfoindex:0,tabtitle:{a:"产品",b:"中心"},tabnav:[],classid:"",curinfo:[],arr:[],keyword:[],goodsinfo:[],morecur:[],curlist:[]}},created:function(){document.body.scrollTop=document.documentElement.scrollTop=0,this.requst();var t=sessionStorage.getItem("mnavindex");this.curindex=t?Number(t):0},computed:a()({},Object(f.d)(["islogin","logreg"])),methods:a()({},Object(f.b)(["getlogreg","gettopath"]),{requst:function(t){var s=this;this.$axios.post("/index/shop/goodsClass").then(function(t){s.curinfo=t.data.data,s.curlist=t.data.data.slice(0,3),s.classid?(s.requstclass(s.classid),s.requstlist("",s.classid,1,6)):(s.classid=s.curinfo[0].class_id,s.requstclass(s.classid),s.requstlist("",s.classid,1,6))})},requstclass:function(t){var s=this;this.$axios.post("/index/shop/productAttr",{id:t}).then(function(t){s.morecur=t.data.data;var i={class_name:"分类"};i.child=s.curinfo,s.morecur.unshift(i)})},requstlist:function(t,s,i,e){var a=this;this.$axios.post("/index/shop/goodsList",{keyword:t,id:s,page:i,limit:e}).then(function(t){console.log(t,"aaaaaa"),a.goodsinfo=t.data.data.data,a.count=t.data.data.total})},tocurinfo:function(t,s){this.curindex=t,this.classid=s.class_id,this.requstclass(this.classid),this.requstlist("",this.classid,1,6)},curset:function(t,s){this.classid=s,this.requstlist(t,s,1,6),this.$forceUpdate()},getList:function(t){this.requstlist("",this.classid,t,6)},pageChange:function(t){this.currentPage=t,this.getList(t)},tonav:function(t){this.curindex=t},tocommoditydetails:function(t,s){var i=this;0==this.islogin?this.$dialog.confirm({title:"您还未登录，前往登录"}).then(function(){i.gettopath("/commoditydetails?class_id="+s.goods_id),i.getlogreg(!0)}).catch(function(){i.islogreg=!1}):this.$router.push({path:"/commoditydetails",query:{class_id:s.goods_id}})},close:function(t){this.getlogreg(t)}}),components:{banner:n.a,tabBar:c.a,moPagination:h.a,curinfo:d}},g={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"product"},[i("div",{staticClass:"productbox"},[i("tabBar",{attrs:{tabinfo:t.tabtitle,tabnav:t.tabnav,curi:t.curindex},on:{change:t.tonav}}),t._v(" "),i("div",{staticClass:"content"},[i("curinfo",{attrs:{curinfo:t.curinfo,curlist:t.curlist,morecur:t.morecur},on:{change:t.tocurinfo,set:t.curset}}),t._v(" "),i("ul",{staticClass:"goodslist"},t._l(t.goodsinfo,function(s,e){return i("li",{key:e,staticClass:"goodsli",on:{click:function(i){return t.tocommoditydetails(e,s)}}},[i("div",{staticClass:"mainpic",style:{backgroundImage:"url("+t.httpUrl+s.image_url+")",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),t._v(" "),i("p",{staticClass:"name"},[t._v(t._s(s.goods_name))]),t._v(" "),i("p",{staticClass:"price"},[i("span",{staticClass:"oprice"},[t._v("￥"+t._s(s.platform_price))]),t._v("\n            /\n            "),i("span",[t._v("￥"+t._s(s.goods_price))])])])}),0)],1),t._v(" "),i("div",{staticClass:"pagenation"},[i("mo-pagination",{attrs:{"page-index":t.currentPage,total:t.count,"page-size":t.pageSize},on:{change:t.pageChange}})],1)],1),t._v(" "),t.logreg?i("logregs",{on:{close:t.close}}):t._e()],1)},staticRenderFns:[]};var v=i("VU/8")(m,g,!1,function(t){i("907N")},"data-v-5d3695bc",null);s.default=v.exports}});
//# sourceMappingURL=14.f4ec96a028a7b38ecbb2.js.map